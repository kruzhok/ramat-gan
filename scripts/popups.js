const dataArray = [
  {
    id: 'support',
    theme: 'purple',
    coverUrl: '/images/covers-svg/1.svg',
    coverText: 'Илья, Юра и Саша о доступных способах самоподдержки в начале адаптации',
    content: [
      {
        text: 'Эмиграция — это очень сложный процесс. Вначале у вас может не быть сил для того, чтобы проявлять любопытство к тому что есть вокруг. Прежде чем изучать местную культуру, осваивать территорию и искать людей, будет полезно собрать вещи, которые помогают вам и дают силы. И помните, что если вам плохо, лучше всего обратиться к специалисту.',
        image: '',
        author: ''
      },
      {
        text: 'Мне помогает дневник, записывать вообще все свои мысли. Когда было совсем плохо брал бумажную тетрадь и писал в темноте карандашом в маленькой комнатке складе которая была в нашем интернатном общежитии. Мне помогает дневник, записывать вообще все свои мысли. Когда было совсем плохо брал бумажную тетрадь и писал в темноте карандашом в маленькой комнатке складе которая была в нашем интернатном общежитии.',
        image: '',
        author: 'Илья'
      },
      {
        text: 'Мне помогает моя семья, когда я дома. И музыка, когда я гуляю один.',
        image: '',
        author: 'Юра'
      },
      {
        text: 'Мне помогает писать о своих чувствах, описывать то что я ощущаю или записывать мысли на диктофон, иногда делится ими с друзьями, встречатся с ними, гулять, переписыватся с друзьями из дома, к которым всегда можно обратиться, всё рассказать и поделится. старые любимые сериалы - - родные и тёплые. Животные которых можно погладить, лечь, прижать их к себе и забыть обо всём. Рисунок, опять же вырисовка и передавание своих эмоций на листе бумаги, - - очень мне помогают.',
        image: '',
        author: 'Саша'
      },
    ]
  },
  {
    id: 'films',
    theme: 'lightpurple',
    coverUrl: '/images/covers-svg/2.svg',
    coverText: 'Данина подборка фильмов с ультра-короткими рецензиями в твиттер-формате',
    content: [
      {
        text: 'В жизни уехавшего очень много забот. Важно оставить время на отдых и восстановление. Эта подбора фильмов от Дани с его рецензиями поможет погрустить, посмеяться или просто отвлечься.',
        image: '',
        author: ''
      },
      {
        text: 'Историческая военная драма о главном провале англичан во времена второй мировой войны.',
        image: '',
        author: 'Дюнкерк, 2017'
      },
      {
        text: 'Мрачноватый и глубокомысленный фильм на тему одиночества.',
        image: '',
        author: 'Человек — швейцарский нож, 2016'
      },
      {
        text: 'Интересная трагикомическая история о двух противоположностях черном зеке и богатом парализованном аристократе.',
        image: '',
        author: '1+1, 2011'
      },
      {
        text: 'Веселый фильм с британской атмосферой криминального Лондона.',
        image: '',
        author: 'Большой куш, 2000'
      },
      {
        text: 'Добрая и душевная история человека который попал в сложную ситуацию из-за переворота в его родной стране.',
        image: '',
        author: 'Терминал, 2004'
      },
      {
        text: 'Очень запутанная криминальная история про внедрение бандитов в полицию и внедрение полиции в бандитов.',
        image: '',
        author: 'Отступники, 2006'
      },
      {
        text: 'Очень трогательная история про тоталитарное (или авторитарное?) правительство и собак.',
        image: '',
        author: 'Остров собак, 2018'
      },
    ]
  },
  {
    id: 'emotions',
    theme: 'lightyellow',
    coverUrl: '/images/covers-svg/3.svg',
    coverText: 'Игорь и Эдуард проведут от гнева и тревоги к спокойствию и даже надежде',
    content: [
      {
        text: 'Этот плейлист для тех кто после переезда и всей этой суеты хочет снять напряжение. Сначала идут более жёсткие и сильные треки, переходя в более размышляющий тип с резким переходом в безумие (Nyan Cat) и под конец — в тонизирующую и мягкую атмосферную музыку.',
        image: '',
        author: 'Ссылка на плейлист'
      },
    ]
  },
  {
    id: 'space',
    theme: 'darkgreen',
    coverUrl: '/images/covers-svg/4.svg',
    coverText: 'Илья, Полина, Дария и Игорь про то, как осваиваться в новой стране',
    content: [
      {
        text: 'Привет',
        image: '',
        author: 'Петя'
      },
      {
        text: 'Shalom',
        image: '',
        author: 'Вася'
      }
    ]
  },
  {
    id: 'contact',
    theme: 'darkorange',
    coverUrl: '/images/covers-svg/5.svg',
    coverText: 'Саша, Игорь и Полина о том, как контактировать с людьми',
    content: [
      {
        text: 'Привет',
        image: '',
        author: 'Петя'
      },
      {
        text: 'Shalom',
        image: '',
        author: 'Вася'
      }
    ]
  },
   {
    id: 'talk',
    theme: 'purple',
    coverUrl: '/images/covers-svg/6.svg',
    coverText: 'Оригинальный способ найти собеседников от Шимона',
    content: [
      {
        text: 'Привет',
        image: '',
        author: 'Петя'
      },
      {
        text: 'Shalom',
        image: '',
        author: 'Вася'
      }
    ]
  },
  {
    id: 'activity',
    theme: 'lightpurple',
    coverUrl: '/images/covers-svg/7.svg',
    coverText: 'Как переключить себя в конструктивную деятельность',
    content: [
      {
        text: 'Привет',
        image: '',
        author: 'Петя'
      },
      {
        text: 'Shalom',
        image: '',
        author: 'Вася'
      }
    ]
  },
  {
    id: 'change',
    theme: 'yellow',
    coverUrl: '/images/covers-svg/8.svg',
    coverText: 'Что делать для того, чтобы ещё лучше понимать местную обстановку',
    content: [
      {
        text: 'Привет',
        image: '',
        author: 'Петя'
      },
      {
        text: 'Shalom',
        image: '',
        author: 'Вася'
      }
    ]
  },
  {
    id: 'advice',
    theme: 'darkgreen',
    coverUrl: '/images/covers-svg/9.svg',
    coverText: 'Мудрость Ализы и Ильи в четырёх абзацах',
    content: [
      {
        text: 'Привет',
        image: '',
        author: 'Петя'
      },
      {
        text: 'Shalom',
        image: '',
        author: 'Вася'
      }
    ]
  },
]





const cards = document.querySelectorAll('.clickable-card');
const popupTmp = document.querySelector('.slider-popup-template');
const slideTemplate = document.querySelector('.card-slide-tmp');

let isOpened = false;

cards.forEach((item) => {
  let popup;
  item.onclick = () => {
    document.body.style.overflow = 'hidden';
    document.body.classList.add('blured');
    const dataForClickedCard = findWithId(dataArray, item.id)
    generateSlider(popupTmp, dataForClickedCard, document.body)
    popup = document.querySelector('.cards-popup');
    dataForClickedCard.content.forEach(item => {
      generateSlide(slideTemplate, item, popup.querySelector('.swiper-wrapper'));
    })
    
    popup.onclick = (e) => {
      if(e.target.contains(document.querySelector('.cards-popup-slider'))) {
        document.body.style.overflow = 'auto';
        document.body.classList.remove('blured');
        popup.remove();
      }
    }
    initializeSwiper()
  }
})



function findWithId(data, id) {
  const item = data.find((el) => {
    return el.id === id;
  })
  return item;
}

function generateSlider(tmp, obj, parent) {
  const node = tmp.content.cloneNode(true);
  node.querySelector('.card-slide-illustration').src = obj.coverUrl;
  node.querySelector('.cards-popup-slider').classList.add(`theme-${obj.theme}`)
  node.querySelector('.card-slide-cover-text').textContent = obj.coverText;
  parent.append(node);
}

function generateSlide(tmp, obj, slider) {
  const node = tmp.content.cloneNode(true);
  node.querySelector('.card-slide-content').textContent = obj.text;
  node.querySelector('.card-slide-author').textContent = obj.author;
  slider.append(node);
}

function initializeSwiper() {
  const swiper = new Swiper('.swiper', {
    // Optional parameters
    direction: 'horizontal',
    loop: true,
  
    // If we need pagination
    pagination: {
      el: '.swiper-pagination',
    },

    keyboard: {
      enabled: true,
    },
  
    // Navigation arrows
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
  
    // And if we need scrollbar
    scrollbar: {
      el: '.swiper-scrollbar',
    },
  });
}





